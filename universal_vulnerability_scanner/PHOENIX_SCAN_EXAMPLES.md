# ğŸš€ Quick Phoenix Scan & Upload Commands

## âš¡ Quick Reference - Ready to Run!

Your Phoenix config is already set up at `.phoenix.config`. Here are the exact commands to scan and upload each test sample.

---

## ğŸ”¥ Scan Vulnerable Samples (Will Find Issues)

### 1. Scan Vulnerable Exact Versions
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan and upload to Phoenix
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix

# Expected: 4 CRITICAL findings (severity 10.0)
```

**What this will detect:**
- âœ… react-server-dom-webpack@19.0.0 (CRITICAL)
- âœ… react-server-dom-parcel@19.1.0 (CRITICAL)
- âœ… react-server-dom-turbopack@19.1.1 (CRITICAL)
- âœ… next@15.0.3 (CRITICAL)

---

### 2. Scan Vulnerable Range Versions
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan and upload to Phoenix
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_range/ \
    --upload-phoenix

# Expected: Multiple CRITICAL findings in ranges
```

**What this will detect:**
- Versions within vulnerable ranges
- Next.js vulnerable versions

---

### 3. Scan Mixed (Vulnerable + Safe)
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan and upload to Phoenix
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_mixed/ \
    --upload-phoenix

# Expected: Mix of CRITICAL and INFO findings
```

**What this will detect:**
- Some vulnerable packages (severity 10)
- Some safe packages (severity 1)

---

### 4. Scan with Lockfile Analysis
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan and upload to Phoenix
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_with_lockfile/ \
    --upload-phoenix

# Expected: Deep dependency tree analysis
```

**What this will detect:**
- Resolved versions from package-lock.json
- Transitive dependencies

---

## âœ… Scan Safe Samples (Clean Results)

### 5. Scan Clean Safe Versions
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan and upload to Phoenix
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/clean_safe_versions/ \
    --upload-phoenix

# Expected: 0 CRITICAL, 27 INFO findings (all safe)
```

**What this will show:**
- âœ… react@19.0.1 (SAFE - severity 1)
- âœ… react-dom@19.1.2 (SAFE - severity 1)
- âœ… next@16.0.7 (SAFE - severity 1)
- âœ… express@4.18.2 (CLEAN - severity 1)

---

### 6. Scan All Test Samples at Once
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan all test samples
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/ \
    --upload-phoenix

# Expected: All findings from all samples
```

---

## ğŸ¯ Specific Library Scan Examples

### Example 1: Scan for Vulnerable React Packages
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# This sample has react@19.0.0 (vulnerable)
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix \
    --debug

# Debug mode saves Phoenix payloads to debug/ folder
```

**Phoenix Upload Payload Preview:**
```json
{
  "importType": "new",
  "assessment": {
    "assetType": "BUILD",
    "name": "NPM Compromise Detection - Local Scan"
  },
  "assets": [{
    "findings": [{
      "name": "Vulnerability: react-server-dom-webpack@19.0.0",
      "severity": "10.0",  â† CRITICAL
      "description": "VULNERABLE: react-server-dom-webpack@19.0.0",
      "remedy": "ğŸš¨ CRITICAL: Upgrade to 19.0.1 or later",
      "referenceIds": ["CVE-2025-66478", "CVE-2025-RSC-WEBPACK"]
    }]
  }]
}
```

---

### Example 2: Scan Next.js Vulnerable Version
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# This will detect next@15.0.3 (vulnerable range)
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --json --output /tmp/next-scan.json

# Then upload
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix
```

**What Phoenix will show:**
```
Finding: next@15.0.3
Severity: 10.0 (CRITICAL)
Description: Version 15.0.3 is in vulnerable range [15.0.0, 15.0.5)
Remedy: Upgrade to 15.0.5 or later
CVE: CVE-2025-66478, CVE-2025-NEXT-RSC
```

---

## ğŸ“Š Advanced Commands

### Scan with JSON Output First
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Save locally first, then upload
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --json --output scan-results.json

# Review the JSON
cat scan-results.json | python -m json.tool

# Then upload to Phoenix
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix
```

---

### Scan Multiple Samples and Upload Each
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Scan each sample individually
for sample in universal_vulnerability_scanner/test_samples/*/; do
    echo "=== Scanning: $sample ==="
    python -m universal_vulnerability_scanner.main scan "$sample" \
        --upload-phoenix
    echo ""
done
```

---

### Scan with Debug Mode (See API Calls)
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Debug mode saves payloads to debug/ folder
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix \
    --debug

# Check what was sent to Phoenix
ls -lh universal_vulnerability_scanner/debug/
cat universal_vulnerability_scanner/debug/phoenix_payload_*.json | python -m json.tool
```

---

## ğŸ” Verify Upload to Phoenix

### Check Your Phoenix Dashboard

After running the upload commands, check Phoenix at:
```
https://api.demo.appsecphx.io
```

**You should see:**
1. **Assessment**: "NPM Compromise Detection - Local Scan"
2. **Findings**: 
   - CRITICAL (10.0) for vulnerable packages
   - INFO (1.0) for safe packages
3. **CVE References**: CVE-2025-66478
4. **Package Details**: Package names, versions, remediation steps

---

## ğŸ“‹ Expected Results by Sample

### rsc_vulnerable_exact/
```
VULNERABLE: 4 packages
  - react-server-dom-webpack@19.0.0 â†’ Severity 10.0
  - react-server-dom-parcel@19.1.0 â†’ Severity 10.0
  - react-server-dom-turbopack@19.1.1 â†’ Severity 10.0
  - next@15.0.3 â†’ Severity 10.0

Phoenix Upload: âœ… 4 CRITICAL findings
```

### rsc_vulnerable_range/
```
VULNERABLE: Multiple packages in ranges
  - Versions within vulnerable ranges

Phoenix Upload: âœ… Multiple CRITICAL findings
```

### rsc_mixed/
```
VULNERABLE: Some packages
SAFE: Some packages

Phoenix Upload: âœ… Mixed CRITICAL + INFO findings
```

### clean_safe_versions/
```
VULNERABLE: 0
SAFE: 12 packages (severity 1.0)
CLEAN: 15 packages (severity 1.0)

Phoenix Upload: âœ… 27 INFO findings (no critical)
```

---

## ğŸ¯ Complete Workflow Example

### Full Demo: Scan â†’ Review â†’ Upload

```bash
#!/bin/bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

echo "=== Step 1: Test Scanner ==="
python -m universal_vulnerability_scanner.main test

echo ""
echo "=== Step 2: Scan Vulnerable Sample ==="
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/

echo ""
echo "=== Step 3: Save JSON Report ==="
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --json --output vulnerable-findings.json

echo ""
echo "=== Step 4: Upload to Phoenix ==="
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix

echo ""
echo "=== Step 5: Scan Safe Sample ==="
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/clean_safe_versions/ \
    --upload-phoenix

echo ""
echo "âœ… Complete! Check Phoenix dashboard for results."
echo "Dashboard: https://api.demo.appsecphx.io"
```

Save as `demo-scan.sh` and run:
```bash
chmod +x demo-scan.sh
./demo-scan.sh
```

---

## ğŸ” Your Phoenix Configuration

From `.phoenix.config`:
```ini
[phoenix]
client_id = e35115aa-a709-47b7-99ae-4c9b8a4234af
client_secret = pat1_70025152b0ce499b89f5a9972661a66d039704482bab423abfc7a2fd3ad0c968
api_base_url = https://api.demo.appsecphx.io
assessment_name = NPM Compromise Detection - Local Scan
import_type = new
```

**Status**: âœ… Ready to use (already configured)

---

## ğŸš¨ Quick Troubleshooting

### "Phoenix upload failed"
```bash
# Check your internet connection
ping api.demo.appsecphx.io

# Verify credentials are correct
cat universal_vulnerability_scanner/.phoenix.config

# Try debug mode to see API response
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix --debug
```

### "No module named 'universal_vulnerability_scanner'"
```bash
# Make sure you're in the project root
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Check Python path
python -c "import sys; print('\n'.join(sys.path))"
```

### "Database not found"
```bash
# Verify database exists
ls -lh universal_vulnerability_scanner/data/vulnerability_database.json

# Scanner should auto-detect it when run from project root
```

---

## ğŸ“š Library-Specific Scan Examples

### Scan for React 19.x Vulnerabilities
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Detects: react@19.0.0, react-dom@19.1.0, etc.
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix
```

### Scan for React Server Components
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Detects: react-server-dom-webpack, parcel, turbopack
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix
```

### Scan for Next.js Vulnerabilities
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier

# Detects: next@15.0.0-15.0.4, 15.1.0-15.1.8, etc.
python -m universal_vulnerability_scanner.main scan \
    universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ \
    --upload-phoenix
```

---

## âš¡ One-Liner Commands

### Scan vulnerable sample and upload:
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier && python -m universal_vulnerability_scanner.main scan universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ --upload-phoenix
```

### Scan safe sample and upload:
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier && python -m universal_vulnerability_scanner.main scan universal_vulnerability_scanner/test_samples/clean_safe_versions/ --upload-phoenix
```

### Scan all samples:
```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier && python -m universal_vulnerability_scanner.main scan universal_vulnerability_scanner/test_samples/ --upload-phoenix
```

---

## ğŸ“ Understanding Phoenix Upload

### What Gets Uploaded

For each finding, Phoenix receives:
- **Package name and version**
- **Severity** (1.0 for safe, 10.0 for vulnerable)
- **Verdict** (VULNERABLE, SAFE, CLEAN)
- **CVE references** (CVE-2025-66478, etc.)
- **Remediation steps** (Upgrade to X.X.X)
- **File location** (package.json, package-lock.json)

### Phoenix Dashboard View

```
Assessment: NPM Compromise Detection - Local Scan
â”œâ”€â”€ Asset: Build (from local scan)
    â”œâ”€â”€ CRITICAL Finding (10.0)
    â”‚   â”œâ”€â”€ react-server-dom-webpack@19.0.0
    â”‚   â”œâ”€â”€ CVE: CVE-2025-66478
    â”‚   â””â”€â”€ Remedy: Upgrade to 19.0.1
    â”œâ”€â”€ INFO Finding (1.0)
    â”‚   â”œâ”€â”€ react@19.0.1 (safe version)
    â”‚   â””â”€â”€ No action required
```

---

## âœ… Success Indicators

After uploading, you should see:
```
âœ… Obtained Phoenix API access token
ğŸš€ Uploading X findings to Phoenix...
âœ… Successfully uploaded to Phoenix Security
ğŸ“Š View results at: https://api.demo.appsecphx.io
```

---

## ğŸš€ Quick Start (Copy & Paste)

**Most Common Use Case** - Scan vulnerable sample and upload:

```bash
cd /Users/francescocipollone/Documents/GitHub/Shai-Halud-tinycolour-compromise-verifier
python -m universal_vulnerability_scanner.main scan universal_vulnerability_scanner/test_samples/rsc_vulnerable_exact/ --upload-phoenix
```

**Expected Output:**
```
ğŸ“‚ Loading vulnerability database
âœ… Loaded 11 vulnerabilities
ğŸ” Scanning: test_samples/rsc_vulnerable_exact/
âœ… Scan complete: 4 findings

ğŸš¨ VULNERABLE PACKAGES DETECTED: 4

ğŸ” Loaded Phoenix config
âœ… Obtained Phoenix API access token
ğŸš€ Uploading 4 findings to Phoenix...
âœ… Successfully uploaded to Phoenix Security
```

âœ… **Done!** Check your Phoenix dashboard at https://api.demo.appsecphx.io

---

**Created**: December 4, 2025  
**Config**: `.phoenix.config` (already set up)  
**Status**: âœ… Ready to scan!


